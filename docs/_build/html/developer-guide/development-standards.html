

<!DOCTYPE html>
<html class="writer-html5" lang="en" data-content_root="../">
<head>
  <meta charset="utf-8" /><meta name="viewport" content="width=device-width, initial-scale=1" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Development Standards &mdash; mlpy 2.0.0 documentation</title>
      <link rel="stylesheet" type="text/css" href="../_static/pygments.css?v=b86133f3" />
      <link rel="stylesheet" type="text/css" href="../_static/css/theme.css?v=e59714d7" />
      <link rel="stylesheet" type="text/css" href="../_static/custom.css?v=6ef3b6bf" />

  
      <script src="../_static/jquery.js?v=5d32c60e"></script>
      <script src="../_static/_sphinx_javascript_frameworks_compat.js?v=2cd50e6c"></script>
      <script src="../_static/documentation_options.js?v=51b770b3"></script>
      <script src="../_static/doctools.js?v=9bcbadda"></script>
      <script src="../_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Unified ML Test Runner" href="test-runner.html" />
    <link rel="prev" title="IDE and Tooling Integration" href="ide-tooling-integration.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="../index.html" class="icon icon-home">
            mlpy
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">User Documentation</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../user-guide/index.html">User Guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="../user-guide/tutorial.html">ML Language Tutorial</a></li>
<li class="toctree-l1"><a class="reference internal" href="../user-guide/language-reference.html">Language Reference</a></li>
<li class="toctree-l1"><a class="reference internal" href="../user-guide/standard-library.html">Standard Library</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Integration Documentation</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../integration-guide/index.html">Integration Guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="../integration-guide/python-integration.html">Python Integration</a></li>
<li class="toctree-l1"><a class="reference internal" href="../integration-guide/api-reference.html">API Reference</a></li>
<li class="toctree-l1"><a class="reference internal" href="../integration-guide/examples.html">Integration Examples</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Developer Documentation</span></p>
<ul class="current">
<li class="toctree-l1 current"><a class="reference internal" href="index.html">Developer Guide</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="architecture.html">Architecture</a></li>
<li class="toctree-l2"><a class="reference internal" href="security-model.html">Security Model</a></li>
<li class="toctree-l2"><a class="reference internal" href="compilation-pipeline.html">Compilation Pipeline</a></li>
<li class="toctree-l2"><a class="reference internal" href="runtime-systems.html">Runtime Systems</a></li>
<li class="toctree-l2"><a class="reference internal" href="extending-mlpy.html">Extending mlpy</a></li>
<li class="toctree-l2"><a class="reference internal" href="stdlib-module-development.html">Standard Library Module Development</a></li>
<li class="toctree-l2"><a class="reference internal" href="writing-stdlib-modules.html">Writing Standard Library Modules</a></li>
<li class="toctree-l2"><a class="reference internal" href="bridge-system-guide.html">Bridge System Guide</a></li>
<li class="toctree-l2"><a class="reference internal" href="security-analysis-extension.html">Security Analysis Extension</a></li>
<li class="toctree-l2"><a class="reference internal" href="codegen-extension.html">Code Generation Extension</a></li>
<li class="toctree-l2"><a class="reference internal" href="ide-tooling-integration.html">IDE and Tooling Integration</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">Development Standards</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#code-quality-standards">Code Quality Standards</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#python-code-standards">Python Code Standards</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#documentation-standards">Documentation Standards</a></li>
<li class="toctree-l3"><a class="reference internal" href="#security-standards">Security Standards</a></li>
<li class="toctree-l3"><a class="reference internal" href="#performance-standards">Performance Standards</a></li>
<li class="toctree-l3"><a class="reference internal" href="#testing-standards">Testing Standards</a></li>
<li class="toctree-l3"><a class="reference internal" href="#error-handling-standards">Error Handling Standards</a></li>
<li class="toctree-l3"><a class="reference internal" href="#git-and-version-control-standards">Git and Version Control Standards</a></li>
<li class="toctree-l3"><a class="reference internal" href="#code-review-standards">Code Review Standards</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="test-runner.html">Unified ML Test Runner</a></li>
<li class="toctree-l2"><a class="reference internal" href="index.html#target-audience">Target Audience</a></li>
<li class="toctree-l2"><a class="reference internal" href="index.html#prerequisites">Prerequisites</a></li>
<li class="toctree-l2"><a class="reference internal" href="index.html#quick-start-for-contributors">Quick Start for Contributors</a></li>
<li class="toctree-l2"><a class="reference internal" href="index.html#architecture-overview">Architecture Overview</a></li>
<li class="toctree-l2"><a class="reference internal" href="index.html#security-first-development">Security-First Development</a></li>
<li class="toctree-l2"><a class="reference internal" href="index.html#performance-requirements">Performance Requirements</a></li>
<li class="toctree-l2"><a class="reference internal" href="index.html#getting-help">Getting Help</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="architecture.html">Architecture</a></li>
<li class="toctree-l1"><a class="reference internal" href="security-model.html">Security Model</a></li>
<li class="toctree-l1"><a class="reference internal" href="extending-mlpy.html">Extending mlpy</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">API Reference</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../api/modules.html">API Documentation</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">mlpy</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../index.html" class="icon icon-home" aria-label="Home"></a></li>
          <li class="breadcrumb-item"><a href="index.html">Developer Guide</a></li>
      <li class="breadcrumb-item active">Development Standards</li>
      <li class="wy-breadcrumbs-aside">
            <a href="../_sources/developer-guide/development-standards.rst.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="development-standards">
<h1>Development Standards<a class="headerlink" href="#development-standards" title="Link to this heading"></a></h1>
<p>This document establishes comprehensive development standards for mlpy contributors. These standards ensure code quality, security, performance, and maintainability across the entire codebase.</p>
<section id="code-quality-standards">
<h2>Code Quality Standards<a class="headerlink" href="#code-quality-standards" title="Link to this heading"></a></h2>
<section id="python-code-standards">
<h3>Python Code Standards<a class="headerlink" href="#python-code-standards" title="Link to this heading"></a></h3>
<p><strong>PEP 8 Compliance with Extensions</strong>:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># Maximum line length: 100 characters (extended from PEP 8&#39;s 79)</span>
<span class="k">def</span><span class="w"> </span><span class="nf">long_function_name_that_demonstrates_line_length_guidelines</span><span class="p">(</span>
    <span class="n">parameter_one</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
    <span class="n">parameter_two</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span>
    <span class="n">parameter_three</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">dict</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="n">ComplexReturnType</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Function demonstrating proper formatting standards.&quot;&quot;&quot;</span>
    <span class="k">pass</span>

<span class="c1"># Type hints are mandatory for all public APIs</span>
<span class="k">def</span><span class="w"> </span><span class="nf">process_ml_code</span><span class="p">(</span>
    <span class="n">source_code</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
    <span class="n">source_file</span><span class="p">:</span> <span class="nb">str</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">strict_security</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="n">TranspilationResult</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Process ML source code with security validation.&quot;&quot;&quot;</span>
    <span class="k">pass</span>

<span class="c1"># Use dataclasses for structured data</span>
<span class="nd">@dataclass</span>
<span class="k">class</span><span class="w"> </span><span class="nc">SecurityIssue</span><span class="p">:</span>
    <span class="n">severity</span><span class="p">:</span> <span class="nb">str</span>
    <span class="n">category</span><span class="p">:</span> <span class="nb">str</span>
    <span class="n">message</span><span class="p">:</span> <span class="nb">str</span>
    <span class="n">line</span><span class="p">:</span> <span class="nb">int</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="n">column</span><span class="p">:</span> <span class="nb">int</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="n">context</span><span class="p">:</span> <span class="nb">dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]</span> <span class="o">=</span> <span class="n">field</span><span class="p">(</span><span class="n">default_factory</span><span class="o">=</span><span class="nb">dict</span><span class="p">)</span>
</pre></div>
</div>
<p><strong>Import Organization</strong>:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># 1. Standard library imports</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">ast</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">re</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">dataclasses</span><span class="w"> </span><span class="kn">import</span> <span class="n">dataclass</span><span class="p">,</span> <span class="n">field</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">typing</span><span class="w"> </span><span class="kn">import</span> <span class="n">Any</span><span class="p">,</span> <span class="n">Optional</span>

<span class="c1"># 2. Third-party imports</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">lark</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">pytest</span>

<span class="c1"># 3. Local application imports</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">mlpy.ml.grammar.ast_nodes</span><span class="w"> </span><span class="kn">import</span> <span class="n">ASTNode</span><span class="p">,</span> <span class="n">Expression</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">mlpy.ml.errors.exceptions</span><span class="w"> </span><span class="kn">import</span> <span class="n">MLSecurityError</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">mlpy.runtime.capabilities.manager</span><span class="w"> </span><span class="kn">import</span> <span class="n">CapabilityContext</span>
</pre></div>
</div>
<p><strong>Naming Conventions</strong>:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># Classes: PascalCase</span>
<span class="k">class</span><span class="w"> </span><span class="nc">SecurityAnalyzer</span><span class="p">:</span>
    <span class="k">pass</span>

<span class="c1"># Functions and variables: snake_case</span>
<span class="k">def</span><span class="w"> </span><span class="nf">analyze_security_patterns</span><span class="p">():</span>
    <span class="n">pattern_count</span> <span class="o">=</span> <span class="mi">0</span>
    <span class="k">return</span> <span class="n">pattern_count</span>

<span class="c1"># Constants: UPPER_SNAKE_CASE</span>
<span class="n">MAX_SECURITY_ISSUES</span> <span class="o">=</span> <span class="mi">100</span>
<span class="n">DEFAULT_TIMEOUT_SECONDS</span> <span class="o">=</span> <span class="mf">30.0</span>

<span class="c1"># Private members: leading underscore</span>
<span class="k">class</span><span class="w"> </span><span class="nc">Parser</span><span class="p">:</span>
    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_internal_state</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__very_private</span> <span class="o">=</span> <span class="kc">None</span>
</pre></div>
</div>
</section>
</section>
<section id="documentation-standards">
<h2>Documentation Standards<a class="headerlink" href="#documentation-standards" title="Link to this heading"></a></h2>
<p><strong>Docstring Format</strong> (Google Style):</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">def</span><span class="w"> </span><span class="nf">transpile_ml_code</span><span class="p">(</span>
    <span class="n">source_code</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
    <span class="n">source_file</span><span class="p">:</span> <span class="nb">str</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">strict_security</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span>
    <span class="n">generate_source_maps</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="n">TranspilationResult</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Transpile ML source code to Python with security validation.</span>

<span class="sd">    This function performs complete ML-to-Python transpilation including</span>
<span class="sd">    parsing, security analysis, and code generation. All operations are</span>
<span class="sd">    performed with capability-based security validation.</span>

<span class="sd">    Args:</span>
<span class="sd">        source_code: ML source code to transpile</span>
<span class="sd">        source_file: Optional source file path for error reporting</span>
<span class="sd">        strict_security: Enable strict security analysis mode</span>
<span class="sd">        generate_source_maps: Generate source maps for debugging</span>

<span class="sd">    Returns:</span>
<span class="sd">        TranspilationResult containing generated Python code, source maps,</span>
<span class="sd">        and security analysis results.</span>

<span class="sd">    Raises:</span>
<span class="sd">        MLSyntaxError: If source code contains syntax errors</span>
<span class="sd">        MLSecurityError: If security analysis detects threats</span>
<span class="sd">        TranspilationError: If code generation fails</span>

<span class="sd">    Example:</span>
<span class="sd">        &gt;&gt;&gt; result = transpile_ml_code(&#39;function hello() { return &quot;world&quot; }&#39;)</span>
<span class="sd">        &gt;&gt;&gt; print(result.python_code)</span>
<span class="sd">        def hello():</span>
<span class="sd">            return &quot;world&quot;</span>

<span class="sd">    Security:</span>
<span class="sd">        This function validates all code for security threats before</span>
<span class="sd">        generation. Set strict_security=False only for trusted code.</span>

<span class="sd">    Performance:</span>
<span class="sd">        Typical transpilation completes in &lt;10ms. Large files may require</span>
<span class="sd">        additional processing time for security analysis.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">pass</span>
</pre></div>
</div>
<p><strong>Module Documentation</strong>:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="sd">&quot;&quot;&quot;ML Language Security Analysis Module.</span>

<span class="sd">This module provides comprehensive security analysis for ML language constructs,</span>
<span class="sd">detecting potential vulnerabilities through static analysis of AST structures.</span>

<span class="sd">The security analyzer implements multiple detection strategies:</span>
<span class="sd">- Pattern-based threat detection</span>
<span class="sd">- Data flow analysis for taint propagation</span>
<span class="sd">- Capability-based access validation</span>
<span class="sd">- CWE-mapped vulnerability classification</span>

<span class="sd">Example:</span>
<span class="sd">    from mlpy.ml.analysis.security_analyzer import SecurityAnalyzer</span>

<span class="sd">    analyzer = SecurityAnalyzer(&quot;source.ml&quot;)</span>
<span class="sd">    issues = analyzer.analyze(ast_node)</span>

<span class="sd">Performance:</span>
<span class="sd">    The analyzer is optimized for sub-millisecond analysis of typical programs</span>
<span class="sd">    using parallel processing and intelligent caching strategies.</span>

<span class="sd">Security:</span>
<span class="sd">    All security analysis is performed in isolated contexts to prevent</span>
<span class="sd">    analysis-time attacks or information leakage.</span>
<span class="sd">&quot;&quot;&quot;</span>
</pre></div>
</div>
</section>
<section id="security-standards">
<h2>Security Standards<a class="headerlink" href="#security-standards" title="Link to this heading"></a></h2>
<p><strong>Security-First Development Principles</strong>:</p>
<ol class="arabic simple">
<li><p><strong>Fail Secure</strong>: All error conditions default to secure behavior</p></li>
<li><p><strong>Least Privilege</strong>: Functions request minimal capabilities required</p></li>
<li><p><strong>Input Validation</strong>: All external input is validated before processing</p></li>
<li><p><strong>Output Sanitization</strong>: All output is sanitized for the target context</p></li>
<li><p><strong>Audit Trail</strong>: Security-relevant operations are logged comprehensively</p></li>
</ol>
<p><strong>Capability-Based Security Implementation</strong>:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span><span class="w"> </span><span class="nn">mlpy.runtime.capabilities.decorators</span><span class="w"> </span><span class="kn">import</span> <span class="n">require_capability</span>

<span class="nd">@require_capability</span><span class="p">(</span><span class="s2">&quot;file:read:source&quot;</span><span class="p">)</span>
<span class="k">def</span><span class="w"> </span><span class="nf">read_source_file</span><span class="p">(</span><span class="n">file_path</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Read source file with capability validation.</span>

<span class="sd">    Security:</span>
<span class="sd">        Requires file:read:source capability for access.</span>
<span class="sd">        Path traversal attacks are prevented by validation.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="c1"># Validate file path to prevent directory traversal</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">is_safe_file_path</span><span class="p">(</span><span class="n">file_path</span><span class="p">):</span>
        <span class="k">raise</span> <span class="n">SecurityError</span><span class="p">(</span><span class="s2">&quot;Unsafe file path detected&quot;</span><span class="p">)</span>

    <span class="c1"># Read file with error handling</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">file_path</span><span class="p">,</span> <span class="s1">&#39;r&#39;</span><span class="p">,</span> <span class="n">encoding</span><span class="o">=</span><span class="s1">&#39;utf-8&#39;</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">f</span><span class="o">.</span><span class="n">read</span><span class="p">()</span>
    <span class="k">except</span> <span class="ne">OSError</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
        <span class="k">raise</span> <span class="n">FileAccessError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Cannot read file: </span><span class="si">{</span><span class="n">e</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

<span class="k">def</span><span class="w"> </span><span class="nf">is_safe_file_path</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">path</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Validate file path for security.&quot;&quot;&quot;</span>
    <span class="c1"># Check for directory traversal attempts</span>
    <span class="k">if</span> <span class="s2">&quot;..&quot;</span> <span class="ow">in</span> <span class="n">path</span> <span class="ow">or</span> <span class="n">path</span><span class="o">.</span><span class="n">startswith</span><span class="p">(</span><span class="s2">&quot;/&quot;</span><span class="p">):</span>
        <span class="k">return</span> <span class="kc">False</span>

    <span class="c1"># Check against allowed file extensions</span>
    <span class="n">allowed_extensions</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;.ml&#39;</span><span class="p">,</span> <span class="s1">&#39;.py&#39;</span><span class="p">,</span> <span class="s1">&#39;.md&#39;</span><span class="p">,</span> <span class="s1">&#39;.txt&#39;</span><span class="p">}</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="nb">any</span><span class="p">(</span><span class="n">path</span><span class="o">.</span><span class="n">endswith</span><span class="p">(</span><span class="n">ext</span><span class="p">)</span> <span class="k">for</span> <span class="n">ext</span> <span class="ow">in</span> <span class="n">allowed_extensions</span><span class="p">):</span>
        <span class="k">return</span> <span class="kc">False</span>

    <span class="k">return</span> <span class="kc">True</span>
</pre></div>
</div>
<p><strong>Input Validation Patterns</strong>:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">def</span><span class="w"> </span><span class="nf">validate_ml_identifier</span><span class="p">(</span><span class="n">identifier</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Validate ML language identifier for security.&quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">identifier</span><span class="p">,</span> <span class="nb">str</span><span class="p">):</span>
        <span class="k">return</span> <span class="kc">False</span>

    <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">identifier</span><span class="p">)</span> <span class="o">==</span> <span class="mi">0</span> <span class="ow">or</span> <span class="nb">len</span><span class="p">(</span><span class="n">identifier</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">255</span><span class="p">:</span>
        <span class="k">return</span> <span class="kc">False</span>

    <span class="c1"># Must start with letter or underscore</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="p">(</span><span class="n">identifier</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">isalpha</span><span class="p">()</span> <span class="ow">or</span> <span class="n">identifier</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">==</span> <span class="s1">&#39;_&#39;</span><span class="p">):</span>
        <span class="k">return</span> <span class="kc">False</span>

    <span class="c1"># Must contain only alphanumeric and underscore</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="nb">all</span><span class="p">(</span><span class="n">c</span><span class="o">.</span><span class="n">isalnum</span><span class="p">()</span> <span class="ow">or</span> <span class="n">c</span> <span class="o">==</span> <span class="s1">&#39;_&#39;</span> <span class="k">for</span> <span class="n">c</span> <span class="ow">in</span> <span class="n">identifier</span><span class="p">):</span>
        <span class="k">return</span> <span class="kc">False</span>

    <span class="c1"># Check against reserved keywords</span>
    <span class="k">if</span> <span class="n">identifier</span> <span class="ow">in</span> <span class="n">ML_RESERVED_KEYWORDS</span><span class="p">:</span>
        <span class="k">return</span> <span class="kc">False</span>

    <span class="k">return</span> <span class="kc">True</span>

<span class="k">def</span><span class="w"> </span><span class="nf">sanitize_error_message</span><span class="p">(</span><span class="n">message</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Sanitize error message to prevent information leakage.&quot;&quot;&quot;</span>
    <span class="c1"># Remove file system paths</span>
    <span class="n">message</span> <span class="o">=</span> <span class="n">re</span><span class="o">.</span><span class="n">sub</span><span class="p">(</span><span class="sa">r</span><span class="s1">&#39;/[^\s]+&#39;</span><span class="p">,</span> <span class="s1">&#39;&lt;path&gt;&#39;</span><span class="p">,</span> <span class="n">message</span><span class="p">)</span>

    <span class="c1"># Remove sensitive patterns</span>
    <span class="n">sensitive_patterns</span> <span class="o">=</span> <span class="p">[</span>
        <span class="sa">r</span><span class="s1">&#39;password[=:]\w+&#39;</span><span class="p">,</span>
        <span class="sa">r</span><span class="s1">&#39;token[=:]\w+&#39;</span><span class="p">,</span>
        <span class="sa">r</span><span class="s1">&#39;key[=:]\w+&#39;</span>
    <span class="p">]</span>

    <span class="k">for</span> <span class="n">pattern</span> <span class="ow">in</span> <span class="n">sensitive_patterns</span><span class="p">:</span>
        <span class="n">message</span> <span class="o">=</span> <span class="n">re</span><span class="o">.</span><span class="n">sub</span><span class="p">(</span><span class="n">pattern</span><span class="p">,</span> <span class="s1">&#39;&lt;redacted&gt;&#39;</span><span class="p">,</span> <span class="n">message</span><span class="p">,</span> <span class="n">flags</span><span class="o">=</span><span class="n">re</span><span class="o">.</span><span class="n">IGNORECASE</span><span class="p">)</span>

    <span class="k">return</span> <span class="n">message</span>
</pre></div>
</div>
</section>
<section id="performance-standards">
<h2>Performance Standards<a class="headerlink" href="#performance-standards" title="Link to this heading"></a></h2>
<p><strong>Performance Targets</strong>:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># Performance requirements for core operations</span>
<span class="n">PERFORMANCE_TARGETS</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s1">&#39;lexical_analysis&#39;</span><span class="p">:</span> <span class="mf">0.1</span><span class="p">,</span>      <span class="c1"># milliseconds</span>
    <span class="s1">&#39;syntax_parsing&#39;</span><span class="p">:</span> <span class="mf">0.5</span><span class="p">,</span>        <span class="c1"># milliseconds</span>
    <span class="s1">&#39;security_analysis&#39;</span><span class="p">:</span> <span class="mf">1.0</span><span class="p">,</span>     <span class="c1"># milliseconds</span>
    <span class="s1">&#39;code_generation&#39;</span><span class="p">:</span> <span class="mf">1.0</span><span class="p">,</span>       <span class="c1"># milliseconds</span>
    <span class="s1">&#39;full_transpilation&#39;</span><span class="p">:</span> <span class="mf">10.0</span><span class="p">,</span>   <span class="c1"># milliseconds</span>
    <span class="s1">&#39;capability_check&#39;</span><span class="p">:</span> <span class="mf">0.01</span><span class="p">,</span>     <span class="c1"># milliseconds</span>
<span class="p">}</span>
</pre></div>
</div>
<p><strong>Performance Monitoring</strong>:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span><span class="w"> </span><span class="nn">functools</span><span class="w"> </span><span class="kn">import</span> <span class="n">wraps</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">time</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">mlpy.runtime.profiling.monitor</span><span class="w"> </span><span class="kn">import</span> <span class="n">performance_monitor</span>

<span class="k">def</span><span class="w"> </span><span class="nf">performance_critical</span><span class="p">(</span><span class="n">target_ms</span><span class="p">:</span> <span class="nb">float</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Decorator for performance-critical functions.&quot;&quot;&quot;</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">decorator</span><span class="p">(</span><span class="n">func</span><span class="p">):</span>
        <span class="nd">@wraps</span><span class="p">(</span><span class="n">func</span><span class="p">)</span>
        <span class="k">def</span><span class="w"> </span><span class="nf">wrapper</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
            <span class="n">start_time</span> <span class="o">=</span> <span class="n">time</span><span class="o">.</span><span class="n">perf_counter</span><span class="p">()</span>

            <span class="k">try</span><span class="p">:</span>
                <span class="n">result</span> <span class="o">=</span> <span class="n">func</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
                <span class="k">return</span> <span class="n">result</span>
            <span class="k">finally</span><span class="p">:</span>
                <span class="n">elapsed_ms</span> <span class="o">=</span> <span class="p">(</span><span class="n">time</span><span class="o">.</span><span class="n">perf_counter</span><span class="p">()</span> <span class="o">-</span> <span class="n">start_time</span><span class="p">)</span> <span class="o">*</span> <span class="mi">1000</span>

                <span class="k">if</span> <span class="n">elapsed_ms</span> <span class="o">&gt;</span> <span class="n">target_ms</span><span class="p">:</span>
                    <span class="n">performance_monitor</span><span class="o">.</span><span class="n">record_slowdown</span><span class="p">(</span>
                        <span class="n">function</span><span class="o">=</span><span class="n">func</span><span class="o">.</span><span class="vm">__name__</span><span class="p">,</span>
                        <span class="n">target_ms</span><span class="o">=</span><span class="n">target_ms</span><span class="p">,</span>
                        <span class="n">actual_ms</span><span class="o">=</span><span class="n">elapsed_ms</span>
                    <span class="p">)</span>
        <span class="k">return</span> <span class="n">wrapper</span>
    <span class="k">return</span> <span class="n">decorator</span>

<span class="nd">@performance_critical</span><span class="p">(</span><span class="mf">1.0</span><span class="p">)</span>  <span class="c1"># Target: 1ms</span>
<span class="k">def</span><span class="w"> </span><span class="nf">analyze_security</span><span class="p">(</span><span class="n">ast_node</span><span class="p">:</span> <span class="n">ASTNode</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">list</span><span class="p">[</span><span class="n">SecurityIssue</span><span class="p">]:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Analyze AST for security issues.&quot;&quot;&quot;</span>
    <span class="k">pass</span>
</pre></div>
</div>
<p><strong>Memory Management</strong>:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span><span class="w"> </span><span class="nn">weakref</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">typing</span><span class="w"> </span><span class="kn">import</span> <span class="n">Protocol</span>

<span class="k">class</span><span class="w"> </span><span class="nc">ResourceManager</span><span class="p">(</span><span class="n">Protocol</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Protocol for managed resources.&quot;&quot;&quot;</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">cleanup</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span> <span class="o">...</span>

<span class="k">class</span><span class="w"> </span><span class="nc">ManagedResource</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Base class for resources requiring cleanup.&quot;&quot;&quot;</span>
    <span class="n">_instances</span> <span class="o">=</span> <span class="n">weakref</span><span class="o">.</span><span class="n">WeakSet</span><span class="p">()</span>

    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_instances</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_cleanup_callbacks</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="nb">callable</span><span class="p">]</span> <span class="o">=</span> <span class="p">[]</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">add_cleanup_callback</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">callback</span><span class="p">:</span> <span class="nb">callable</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Add callback for resource cleanup.&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_cleanup_callbacks</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">callback</span><span class="p">)</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">cleanup</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Clean up managed resources.&quot;&quot;&quot;</span>
        <span class="k">for</span> <span class="n">callback</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_cleanup_callbacks</span><span class="p">:</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="n">callback</span><span class="p">()</span>
            <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
                <span class="n">logger</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Cleanup callback failed: </span><span class="si">{</span><span class="n">e</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

    <span class="nd">@classmethod</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">cleanup_all</span><span class="p">(</span><span class="bp">cls</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Clean up all managed instances.&quot;&quot;&quot;</span>
        <span class="k">for</span> <span class="n">instance</span> <span class="ow">in</span> <span class="nb">list</span><span class="p">(</span><span class="bp">cls</span><span class="o">.</span><span class="n">_instances</span><span class="p">):</span>
            <span class="n">instance</span><span class="o">.</span><span class="n">cleanup</span><span class="p">()</span>
</pre></div>
</div>
</section>
<section id="testing-standards">
<h2>Testing Standards<a class="headerlink" href="#testing-standards" title="Link to this heading"></a></h2>
<p><strong>Test Structure and Organization</strong>:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># tests/test_security_analyzer.py</span>
<span class="sd">&quot;&quot;&quot;Comprehensive tests for security analysis functionality.&quot;&quot;&quot;</span>

<span class="kn">import</span><span class="w"> </span><span class="nn">pytest</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">unittest.mock</span><span class="w"> </span><span class="kn">import</span> <span class="n">Mock</span><span class="p">,</span> <span class="n">patch</span>

<span class="kn">from</span><span class="w"> </span><span class="nn">mlpy.ml.analysis.security_analyzer</span><span class="w"> </span><span class="kn">import</span> <span class="n">SecurityAnalyzer</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">mlpy.ml.grammar.ast_nodes</span><span class="w"> </span><span class="kn">import</span> <span class="n">FunctionCall</span><span class="p">,</span> <span class="n">StringLiteral</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">mlpy.ml.errors.exceptions</span><span class="w"> </span><span class="kn">import</span> <span class="n">MLSecurityError</span>


<span class="k">class</span><span class="w"> </span><span class="nc">TestSecurityAnalyzer</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Test suite for SecurityAnalyzer class.&quot;&quot;&quot;</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">setup_method</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Set up test fixtures.&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">analyzer</span> <span class="o">=</span> <span class="n">SecurityAnalyzer</span><span class="p">(</span><span class="s2">&quot;test.ml&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">mock_ast</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">create_test_ast</span><span class="p">()</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">teardown_method</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Clean up after tests.&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">analyzer</span><span class="o">.</span><span class="n">cleanup</span><span class="p">()</span>

    <span class="nd">@pytest</span><span class="o">.</span><span class="n">mark</span><span class="o">.</span><span class="n">security</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">test_detects_code_injection_eval</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Test detection of eval() code injection vulnerability.&quot;&quot;&quot;</span>
        <span class="c1"># Arrange</span>
        <span class="n">eval_call</span> <span class="o">=</span> <span class="n">FunctionCall</span><span class="p">(</span>
            <span class="n">function</span><span class="o">=</span><span class="s2">&quot;eval&quot;</span><span class="p">,</span>
            <span class="n">arguments</span><span class="o">=</span><span class="p">[</span><span class="n">StringLiteral</span><span class="p">(</span><span class="s2">&quot;user_input&quot;</span><span class="p">)],</span>
            <span class="n">line</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span>
            <span class="n">column</span><span class="o">=</span><span class="mi">1</span>
        <span class="p">)</span>

        <span class="c1"># Act</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">analyzer</span><span class="o">.</span><span class="n">visit_function_call</span><span class="p">(</span><span class="n">eval_call</span><span class="p">)</span>
        <span class="n">issues</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">analyzer</span><span class="o">.</span><span class="n">issues</span>

        <span class="c1"># Assert</span>
        <span class="k">assert</span> <span class="nb">len</span><span class="p">(</span><span class="n">issues</span><span class="p">)</span> <span class="o">==</span> <span class="mi">1</span>
        <span class="k">assert</span> <span class="n">issues</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">severity</span> <span class="o">==</span> <span class="s2">&quot;critical&quot;</span>
        <span class="k">assert</span> <span class="n">issues</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">category</span> <span class="o">==</span> <span class="s2">&quot;code_injection&quot;</span>
        <span class="k">assert</span> <span class="s2">&quot;eval&quot;</span> <span class="ow">in</span> <span class="n">issues</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">message</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span>

    <span class="nd">@pytest</span><span class="o">.</span><span class="n">mark</span><span class="o">.</span><span class="n">performance</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">test_analysis_performance_target</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">benchmark</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Test that security analysis meets performance targets.&quot;&quot;&quot;</span>
        <span class="c1"># Arrange</span>
        <span class="n">large_ast</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">create_large_test_ast</span><span class="p">(</span><span class="n">nodes</span><span class="o">=</span><span class="mi">1000</span><span class="p">)</span>

        <span class="c1"># Act &amp; Assert</span>
        <span class="n">result</span> <span class="o">=</span> <span class="n">benchmark</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">analyzer</span><span class="o">.</span><span class="n">analyze</span><span class="p">,</span> <span class="n">large_ast</span><span class="p">)</span>
        <span class="k">assert</span> <span class="n">result</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span>
        <span class="c1"># benchmark automatically validates against performance targets</span>

    <span class="nd">@pytest</span><span class="o">.</span><span class="n">mark</span><span class="o">.</span><span class="n">parametrize</span><span class="p">(</span><span class="s2">&quot;function_name,expected_severity&quot;</span><span class="p">,</span> <span class="p">[</span>
        <span class="p">(</span><span class="s2">&quot;eval&quot;</span><span class="p">,</span> <span class="s2">&quot;critical&quot;</span><span class="p">),</span>
        <span class="p">(</span><span class="s2">&quot;exec&quot;</span><span class="p">,</span> <span class="s2">&quot;critical&quot;</span><span class="p">),</span>
        <span class="p">(</span><span class="s2">&quot;getattr&quot;</span><span class="p">,</span> <span class="s2">&quot;high&quot;</span><span class="p">),</span>
        <span class="p">(</span><span class="s2">&quot;open&quot;</span><span class="p">,</span> <span class="s2">&quot;medium&quot;</span><span class="p">),</span>
    <span class="p">])</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">test_dangerous_function_detection</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">function_name</span><span class="p">,</span> <span class="n">expected_severity</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Test detection of various dangerous functions.&quot;&quot;&quot;</span>
        <span class="c1"># Arrange</span>
        <span class="n">func_call</span> <span class="o">=</span> <span class="n">FunctionCall</span><span class="p">(</span>
            <span class="n">function</span><span class="o">=</span><span class="n">function_name</span><span class="p">,</span>
            <span class="n">arguments</span><span class="o">=</span><span class="p">[</span><span class="n">StringLiteral</span><span class="p">(</span><span class="s2">&quot;test&quot;</span><span class="p">)],</span>
            <span class="n">line</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span>
            <span class="n">column</span><span class="o">=</span><span class="mi">1</span>
        <span class="p">)</span>

        <span class="c1"># Act</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">analyzer</span><span class="o">.</span><span class="n">visit_function_call</span><span class="p">(</span><span class="n">func_call</span><span class="p">)</span>

        <span class="c1"># Assert</span>
        <span class="n">issues</span> <span class="o">=</span> <span class="p">[</span><span class="n">i</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">analyzer</span><span class="o">.</span><span class="n">issues</span> <span class="k">if</span> <span class="n">i</span><span class="o">.</span><span class="n">category</span> <span class="o">==</span> <span class="s2">&quot;code_injection&quot;</span><span class="p">]</span>
        <span class="k">assert</span> <span class="nb">len</span><span class="p">(</span><span class="n">issues</span><span class="p">)</span> <span class="o">==</span> <span class="mi">1</span>
        <span class="k">assert</span> <span class="n">issues</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">severity</span> <span class="o">==</span> <span class="n">expected_severity</span>

    <span class="nd">@pytest</span><span class="o">.</span><span class="n">fixture</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">mock_capability_context</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Provide mock capability context for testing.&quot;&quot;&quot;</span>
        <span class="k">with</span> <span class="n">patch</span><span class="p">(</span><span class="s1">&#39;mlpy.runtime.capabilities.get_current_context&#39;</span><span class="p">)</span> <span class="k">as</span> <span class="n">mock</span><span class="p">:</span>
            <span class="n">mock</span><span class="o">.</span><span class="n">return_value</span><span class="o">.</span><span class="n">check</span><span class="o">.</span><span class="n">return_value</span> <span class="o">=</span> <span class="kc">True</span>
            <span class="k">yield</span> <span class="n">mock</span><span class="o">.</span><span class="n">return_value</span>
</pre></div>
</div>
<p><strong>Test Categories and Markers</strong>:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># pytest.ini configuration</span>
<span class="p">[</span><span class="n">tool</span><span class="p">:</span><span class="n">pytest</span><span class="p">]</span>
<span class="n">markers</span> <span class="o">=</span>
    <span class="n">security</span><span class="p">:</span> <span class="n">Security</span><span class="o">-</span><span class="n">related</span> <span class="n">tests</span>
    <span class="n">performance</span><span class="p">:</span> <span class="n">Performance</span> <span class="n">validation</span> <span class="n">tests</span>
    <span class="n">integration</span><span class="p">:</span> <span class="n">Integration</span> <span class="n">tests</span> <span class="k">with</span> <span class="n">external</span> <span class="n">systems</span>
    <span class="n">slow</span><span class="p">:</span> <span class="n">Tests</span> <span class="n">that</span> <span class="n">take</span> <span class="n">longer</span> <span class="n">than</span> <span class="mi">1</span> <span class="n">second</span>
    <span class="n">capability</span><span class="p">:</span> <span class="n">Capability</span> <span class="n">system</span> <span class="n">tests</span>
    <span class="n">sandbox</span><span class="p">:</span> <span class="n">Sandbox</span> <span class="n">execution</span> <span class="n">tests</span>
</pre></div>
</div>
<p><strong>Coverage Requirements</strong>:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># pyproject.toml</span>
<span class="p">[</span><span class="n">tool</span><span class="o">.</span><span class="n">coverage</span><span class="o">.</span><span class="n">run</span><span class="p">]</span>
<span class="n">source</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;src/mlpy&quot;</span><span class="p">]</span>
<span class="n">omit</span> <span class="o">=</span> <span class="p">[</span>
    <span class="s2">&quot;*/tests/*&quot;</span><span class="p">,</span>
    <span class="s2">&quot;*/test_*.py&quot;</span><span class="p">,</span>
    <span class="s2">&quot;*/__pycache__/*&quot;</span>
<span class="p">]</span>

<span class="p">[</span><span class="n">tool</span><span class="o">.</span><span class="n">coverage</span><span class="o">.</span><span class="n">report</span><span class="p">]</span>
<span class="n">exclude_lines</span> <span class="o">=</span> <span class="p">[</span>
    <span class="s2">&quot;pragma: no cover&quot;</span><span class="p">,</span>
    <span class="s2">&quot;def __repr__&quot;</span><span class="p">,</span>
    <span class="s2">&quot;raise AssertionError&quot;</span><span class="p">,</span>
    <span class="s2">&quot;raise NotImplementedError&quot;</span><span class="p">,</span>
    <span class="s2">&quot;if __name__ == .__main__.:&quot;</span><span class="p">,</span>
    <span class="s2">&quot;@abstract&quot;</span>
<span class="p">]</span>

<span class="c1"># Minimum coverage requirements</span>
<span class="n">fail_under</span> <span class="o">=</span> <span class="mi">95</span>  <span class="c1"># Core components must have 95%+ coverage</span>
<span class="n">show_missing</span> <span class="o">=</span> <span class="n">true</span>
<span class="n">precision</span> <span class="o">=</span> <span class="mi">2</span>
</pre></div>
</div>
</section>
<section id="error-handling-standards">
<h2>Error Handling Standards<a class="headerlink" href="#error-handling-standards" title="Link to this heading"></a></h2>
<p><strong>Exception Hierarchy</strong>:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># Base exceptions</span>
<span class="k">class</span><span class="w"> </span><span class="nc">MLError</span><span class="p">(</span><span class="ne">Exception</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Base exception for all ML-related errors.&quot;&quot;&quot;</span>
    <span class="k">pass</span>

<span class="k">class</span><span class="w"> </span><span class="nc">MLSyntaxError</span><span class="p">(</span><span class="n">MLError</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Syntax errors in ML code.&quot;&quot;&quot;</span>
    <span class="k">pass</span>

<span class="k">class</span><span class="w"> </span><span class="nc">MLSecurityError</span><span class="p">(</span><span class="n">MLError</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Security-related errors.&quot;&quot;&quot;</span>
    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">message</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">cwe</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span> <span class="o">**</span><span class="n">context</span><span class="p">):</span>
        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="n">message</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">cwe</span> <span class="o">=</span> <span class="n">cwe</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">context</span> <span class="o">=</span> <span class="n">context</span>

<span class="k">class</span><span class="w"> </span><span class="nc">MLRuntimeError</span><span class="p">(</span><span class="n">MLError</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Runtime execution errors.&quot;&quot;&quot;</span>
    <span class="k">pass</span>

<span class="c1"># Specific error types</span>
<span class="k">class</span><span class="w"> </span><span class="nc">CapabilityError</span><span class="p">(</span><span class="n">MLSecurityError</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Insufficient capabilities for operation.&quot;&quot;&quot;</span>
    <span class="k">pass</span>

<span class="k">class</span><span class="w"> </span><span class="nc">ValidationError</span><span class="p">(</span><span class="n">MLError</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Input validation failures.&quot;&quot;&quot;</span>
    <span class="k">pass</span>
</pre></div>
</div>
<p><strong>Error Context and Reporting</strong>:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span><span class="w"> </span><span class="nn">dataclasses</span><span class="w"> </span><span class="kn">import</span> <span class="n">dataclass</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">typing</span><span class="w"> </span><span class="kn">import</span> <span class="n">Optional</span><span class="p">,</span> <span class="n">Any</span>

<span class="nd">@dataclass</span>
<span class="k">class</span><span class="w"> </span><span class="nc">ErrorContext</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Rich error context for debugging.&quot;&quot;&quot;</span>
    <span class="n">error</span><span class="p">:</span> <span class="ne">Exception</span>
    <span class="n">source_file</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="n">line_number</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">int</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="n">column_number</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">int</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="n">source_context</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="n">stack_trace</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="n">suggestions</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="n">field</span><span class="p">(</span><span class="n">default_factory</span><span class="o">=</span><span class="nb">list</span><span class="p">)</span>
    <span class="n">related_errors</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="s1">&#39;ErrorContext&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">field</span><span class="p">(</span><span class="n">default_factory</span><span class="o">=</span><span class="nb">list</span><span class="p">)</span>

<span class="k">def</span><span class="w"> </span><span class="nf">create_error_context</span><span class="p">(</span>
    <span class="n">error</span><span class="p">:</span> <span class="ne">Exception</span><span class="p">,</span>
    <span class="n">source_file</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">line</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">column</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="kc">None</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="n">ErrorContext</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Create comprehensive error context.&quot;&quot;&quot;</span>

    <span class="c1"># Extract source context if available</span>
    <span class="n">source_context</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="k">if</span> <span class="n">source_file</span> <span class="ow">and</span> <span class="n">line</span><span class="p">:</span>
        <span class="n">source_context</span> <span class="o">=</span> <span class="n">extract_source_context</span><span class="p">(</span><span class="n">source_file</span><span class="p">,</span> <span class="n">line</span><span class="p">)</span>

    <span class="c1"># Generate helpful suggestions</span>
    <span class="n">suggestions</span> <span class="o">=</span> <span class="n">generate_error_suggestions</span><span class="p">(</span><span class="n">error</span><span class="p">,</span> <span class="n">source_context</span><span class="p">)</span>

    <span class="k">return</span> <span class="n">ErrorContext</span><span class="p">(</span>
        <span class="n">error</span><span class="o">=</span><span class="n">error</span><span class="p">,</span>
        <span class="n">source_file</span><span class="o">=</span><span class="n">source_file</span><span class="p">,</span>
        <span class="n">line_number</span><span class="o">=</span><span class="n">line</span><span class="p">,</span>
        <span class="n">column_number</span><span class="o">=</span><span class="n">column</span><span class="p">,</span>
        <span class="n">source_context</span><span class="o">=</span><span class="n">source_context</span><span class="p">,</span>
        <span class="n">stack_trace</span><span class="o">=</span><span class="n">format_stack_trace</span><span class="p">(</span><span class="n">error</span><span class="p">),</span>
        <span class="n">suggestions</span><span class="o">=</span><span class="n">suggestions</span>
    <span class="p">)</span>
</pre></div>
</div>
</section>
<section id="git-and-version-control-standards">
<h2>Git and Version Control Standards<a class="headerlink" href="#git-and-version-control-standards" title="Link to this heading"></a></h2>
<p><strong>Commit Message Format</strong>:</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>&lt;type&gt;(&lt;scope&gt;): &lt;description&gt;

[optional body]

[optional footer]
</pre></div>
</div>
<p><strong>Types</strong>:
- <strong>feat</strong>: New feature
- <strong>fix</strong>: Bug fix
- <strong>docs</strong>: Documentation changes
- <strong>style</strong>: Code style changes (no functionality change)
- <strong>refactor</strong>: Code refactoring
- <strong>perf</strong>: Performance improvements
- <strong>test</strong>: Test additions or modifications
- <strong>security</strong>: Security improvements
- <strong>chore</strong>: Build process or auxiliary tool changes</p>
<p><strong>Examples</strong>:</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>feat(security): add SQL injection detection to security analyzer

Implement comprehensive SQL injection pattern detection including:
- String concatenation analysis
- Template literal validation
- Dynamic query construction detection

Closes #123

---

fix(parser): resolve parsing error with nested expressions

Fixed issue where deeply nested expressions caused stack overflow
in the AST transformer. Added iterative processing for deep nesting.

Performance impact: Minimal (&lt;1% overhead)
Security impact: None

---

security(capabilities): strengthen capability validation

Enhanced capability validation to prevent privilege escalation:
- Added capability inheritance validation
- Implemented token expiration checking
- Added audit logging for capability grants

BREAKING CHANGE: Capability tokens now require explicit expiration
</pre></div>
</div>
<p><strong>Branch Naming</strong>:</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span># Feature branches
feature/sql-injection-detection
feature/async-await-support

# Bug fix branches
fix/parser-stack-overflow
fix/memory-leak-in-analyzer

# Security branches
security/capability-validation-hardening
security/input-sanitization-improvement

# Documentation branches
docs/developer-guide-update
docs/api-reference-completion
</pre></div>
</div>
</section>
<section id="code-review-standards">
<h2>Code Review Standards<a class="headerlink" href="#code-review-standards" title="Link to this heading"></a></h2>
<p><strong>Review Checklist</strong>:</p>
<ol class="arabic simple">
<li><p><strong>Functionality</strong>
- [ ] Code works as intended
- [ ] Edge cases are handled
- [ ] Error conditions are managed properly</p></li>
<li><p><strong>Security</strong>
- [ ] Input validation is comprehensive
- [ ] Capabilities are properly checked
- [ ] No information leakage in error messages
- [ ] No hardcoded credentials or secrets</p></li>
<li><p><strong>Performance</strong>
- [ ] Meets performance targets
- [ ] No unnecessary memory allocations
- [ ] Efficient algorithms used
- [ ] Proper resource cleanup</p></li>
<li><p><strong>Code Quality</strong>
- [ ] Follows coding standards
- [ ] Proper documentation
- [ ] Appropriate test coverage
- [ ] Clear and maintainable structure</p></li>
<li><p><strong>Testing</strong>
- [ ] Unit tests cover new functionality
- [ ] Integration tests validate behavior
- [ ] Security tests verify threat prevention
- [ ] Performance tests validate targets</p></li>
</ol>
<p><strong>Review Process</strong>:</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>1. Automated checks must pass before human review
   - Linting (ruff, black)
   - Type checking (mypy)
   - Security scanning
   - Test execution
   - Performance benchmarks

2. Human review requirements:
   - At least one approving review from code owner
   - Security review for security-sensitive changes
   - Performance review for performance-critical changes

3. Final validation:
   - All conversations resolved
   - CI/CD pipeline passes completely
   - Documentation updated if needed
</pre></div>
</div>
<p>These development standards ensure that mlpy maintains high quality, security, and performance characteristics while remaining maintainable and accessible to contributors.</p>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="ide-tooling-integration.html" class="btn btn-neutral float-left" title="IDE and Tooling Integration" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="test-runner.html" class="btn btn-neutral float-right" title="Unified ML Test Runner" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2024, mlpy Development Team.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>